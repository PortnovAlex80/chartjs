# Графики на основе данных из CSV с использованием Chart.js и Node.js

## Описание

Этот проект - это веб-приложение, разработанное для наглядного отображения графиков на основе данных, полученных из CSV-файлов. В его основе лежит использование библиотеки Chart.js, которая обеспечивает динамичное и интуитивно понятное визуальное представление данных, а также Node.js для эффективного функционирования серверной части. Ключевыми аспектами проекта являются применение вычислительной геометрии, методов регрессии и аппроксимации с использованием полиномов, а также метода наименьших квадратов для повышения точности обработки данных лазерного сканирования. 

## Структура папок

- `/public` - папка для статических файлов (HTML, JS, CSS).
- `/filters` - папка с модулями фильтров и алгоритмов обработки данных.
- `server.js` - основной файл сервера Node.js.
- `script.js` - скрипт отвечает за отправку запросов на сервер, получение и обработку данных, а также за инициализацию и обновление графиков в ответ на действия пользователя. 

## Установка

1. Установите Node.js и npm.
2. Установите зависимости: `npm install`

### Примечания
- Для корректной работы браузера убедитесь, что путь к исполняемому файлу Chromium верен и соответствует вашей системе.
- В коде предусмотрена автоматическая очистка процесса Chromium при закрытии сервера.

## Запуск

- Добавить файл csv с данными в виде [{x.xxx, y.yyy}] (разделитель `,`)
- Запуск сервера: `npm start`.

## Добавление и модификация алгоритмов и фильтров

1. Для добавления нового алгоритма или фильтра создайте соответствующий модуль в папке `/filters`. Новый фильтр или алгоритм должен принимать массив точек в формате `{ x: number, y: number }` и возвращать массив точек в том же формате.
2. Импортируйте и применяйте новый алгоритм или фильтр в модуле `/public/ChartDataAggregator.js`. Убедитесь, что входные и выходные данные соответствуют требуемому формату точек.
3. Для интеграции алгоритма или фильтра в график, модифицируйте функцию `ChartDataAggregator` так, чтобы она включала результаты работы нового алгоритма или фильтра. Это позволит автоматически интегрировать результаты в графики, отображаемые на веб-странице.


## Основные Функции

### `ChartDataAggregator`

- **Описание**: Агрегирует и обрабатывает данные для визуализации графиков.
- **Параметры**:
  - `csvpoints`: Массив точек из CSV-файла.
  - `coordinateA`: Начальная координата X для фильтрации данных (передается с веб формы).
  - `coordinateB`: Конечная координата X для фильтрации данных (передается с веб формы).
- **Возвращаемое значение**: Promise -> возвращающий массив наборов данных для визуализации.

### Фильтры основы алгоритма Enchance-18

#### `weightedGroundLevelMedianFilter`

- **Описание**: Взвешенный медианный фильтр по уровню земли, ищущий в каждом окне точку с наименьшей координатой Y и присваивающий ей максимальный вес.
- **Параметры**:
  - `points`: Массив точек для фильтрации.
  - `maxWindowSize`: Максимальный размер окна для медианной фильтрации.
  - `maxLength`: Максимальная длина интервала для одного окна фильтрации.
- **Возвращаемое значение**: Отфильтрованный набор точек.

#### `enhancedSegmentApproximation`

- **Описание**: Улучшенный алгоритм аппроксимации сегментов, использующий различные алгоритмы фильтрации и аппроксимации.
- **Параметры**:
  - `points`: Массив точек для аппроксимации.
  - `epsilon`: Пороговое значение погрешности для различных этапов аппроксимации.
- **Возвращаемое значение**: Массив точек, представляющих улучшенную аппроксимацию исходного набора данных.

### `CubicPolynomialApproximation`

- **Общие сведения**: Класс для аппроксимации данных с использованием кубического полинома методом наименьших квадратов.

#### Описание Метода `findRandomQualitySegments`
Метод `findRandomQualitySegments` представляет собой уникальный подход к анализу и обработке набора точек для определения прямолинейных участков. Алгоритм использует случайный выбор точек в качестве начальной точки для каждого сегмента и последовательно расширяет сегмент в обе стороны, пока условия заданной аппроксимации (по значениям RMSE) не будут нарушены.

#### Особенности Алгоритма
1. **Случайный Выбор Начальных Точек:**
   Алгоритм начинает с случайно выбранной точки в наборе, что позволяет избежать предвзятости, связанной с последовательным подходом, и обеспечивает более равномерное покрытие всего диапазона данных.

2. **Динамическое Расширение Сегментов:**
   Сегменты расширяются влево и вправо от начальной точки до тех пор, пока не перестанут соответствовать заданным критериям аппроксимации, обеспечивая гибкость в обработке данных.

3. **Эффективное Управление Сегментами:**
   Алгоритм отслеживает и исключает обработанные сегменты, предотвращая повторную обработку и повышая эффективность.

4. **Избежание Зацикливания:**
   Включены механизмы для предотвращения бесконечного цикла, что критически важно для обеспечения стабильности и надежности работы алгоритма.


## Как использовать

1. Импортируйте необходимые модули в ваш проект.
2. Подготовьте данные в виде массива точек.
3. Используйте `ChartDataAggregator` для агрегации и обработки данных.
4. Применяйте дополнительные фильтры по необходимости.

## Зависимости

Проект зависит от следующих модулей и библиотек:

- `IDataSet`, `IPoint`, `IFilter` для структурирования данных.

## Лицензия
